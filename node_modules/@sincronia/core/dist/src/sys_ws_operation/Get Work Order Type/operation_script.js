"use strict";

(function process(request, response) {
  var assetId = request.pathParams.assetId;
  var woTypes = {
    x_nuvo_eam_clinical_devices: 'x_nuvo_eam_clinical_work_orders',
    x_nuvo_eam_clinical_parts: 'x_nuvo_eam_clinical_work_orders',
    x_nuvo_eam_facilities_devices: 'x_nuvo_eam_facilities_work_orders',
    x_nuvo_eam_facilities_parts: 'x_nuvo_eam_facilities_work_orders',
    x_nuvo_eam_lab_devices: 'x_nuvo_eam_lab_work_orders',
    x_nuvo_eam_lab_parts: 'x_nuvo_eam_lab_work_orders'
  };
  var defaultRecords = {
    x_nuvo_eam_clinical_work_orders: 'c25ee170db307300622f51295e9619ac',
    x_nuvo_eam_facilities_work_orders: '2f1424df2b86d200830327b436da15ad',
    x_nuvo_eam_lab_work_orders: '2f93a7094fa98a00b794a88ca310c78d'
  };
  var assetGr = new GlideRecord('x_nuvo_eam_assets');

  if (assetGr.get(assetId)) {
    var table = woTypes[assetGr.getValue('sys_class_name') || ''];
    var typesGr = new GlideRecord('x_nuvo_eam_work_order_type');

    if (typesGr.get(defaultRecords[table])) {
      return typesGr.getValue('sys_id');
    }
  }

  return '';
})(request, response);